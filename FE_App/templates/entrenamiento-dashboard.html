{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Entrenamiento - FIT EVOLUTION</title>
    <link rel="icon" type="image/png" href="{% static 'images/logopng.png' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/entrenamiento-dashboard.css' %}">
    <style>      
    </style>
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <div class="nav-buttons">
            <a href="{% url 'dashboard' %}" class="btn-secondary">
                <i class="fas fa-arrow-left"></i> Volver al Dashboard
            </a>
            <a href="{% url 'ver_perfil' %}" class="btn-secondary">
                <i class="fas fa-user"></i> Mi Perfil
            </a>
        </div>

        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-dumbbell"></i> Mi Entrenamiento</h1>
            <p>Bienvenido, {{ user.first_name|default:user.username }}! Aquí está tu plan personalizado</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="icon"><i class="fas fa-bullseye"></i></div>
                <h3>Objetivo</h3>
                <div class="value">{{ profile.get_objetivo_display }}</div>
            </div>

            <div class="stat-card">
                <div class="icon"><i class="fas fa-calendar-week"></i></div>
                <h3>Días por Semana</h3>
                <div class="value">{{ plan.dias_semana }} días</div>
            </div>

            <div class="stat-card">
                <div class="icon"><i class="fas fa-chart-line"></i></div>
                <h3>Nivel de Actividad</h3>
                <div class="value">{{ profile.get_nivel_actividad_display }}</div>
            </div>

            <div class="stat-card">
                <div class="icon"><i class="fas fa-clock"></i></div>
                <h3>Tiempo por Sesión</h3>
                <div class="value">{{ profile.tiempo_entrenamiento|default:"60" }} min</div>
            </div>
        </div>

        <!-- Alerts Section -->
        <div class="alerts-section">
            <h2 style="color: #3b82f6; margin-bottom: 15px;">
                <i class="fas fa-brain"></i> Análisis Inteligente
            </h2>
            
            {% if not plan.riesgo_lesion and not plan.riesgo_estancamiento %}
            <div class="alert-card alert-success">
                <div class="icon"><i class="fas fa-check-circle"></i></div>
                <div class="content">
                    <h4>¡Todo en orden!</h4>
                    <p>No se detectan riesgos. Continúa con tu entrenamiento.</p>
                </div>
            </div>
            {% endif %}

            {% if plan.riesgo_lesion %}
            <div class="alert-card alert-danger">
                <div class="icon"><i class="fas fa-exclamation-triangle"></i></div>
                <div class="content">
                    <h4>Riesgo de Lesión Detectado</h4>
                    <p>Nuestro modelo ML sugiere reducir la intensidad o consultar con un especialista.</p>
                </div>
            </div>
            {% endif %}

            {% if plan.riesgo_estancamiento %}
            <div class="alert-card alert-warning">
                <div class="icon"><i class="fas fa-chart-line"></i></div>
                <div class="content">
                    <h4>Posible Estancamiento</h4>
                    <p>Considera variar tu rutina o aumentar la intensidad progresivamente.</p>
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Plan Section -->
        <div class="plan-section">
            <h2><i class="fas fa-clipboard-list"></i> {{ plan.nombre_plan }}</h2>
            
            <div class="plan-info">
                <div class="plan-info-item">
                    <label>Fecha de Inicio</label>
                    <div class="value">{{ plan.fecha_inicio|date:"d/m/Y" }}</div>
                </div>
                <div class="plan-info-item">
                    <label>Fecha de Fin</label>
                    <div class="value">{{ plan.fecha_fin|date:"d/m/Y" }}</div>
                </div>
                <div class="plan-info-item">
                    <label>Estado</label>
                    <div class="value">{{ plan.get_estado_display }}</div>
                </div>
                <div class="plan-info-item">
                    <label>Días Totales</label>
                    <div class="value">{{ plan.dias.count }} días configurados</div>
                </div>
            </div>

            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <a href="{% url 'ver_plan_entrenamiento' plan.id %}" class="btn-primary">
                    <i class="fas fa-eye"></i> Ver Mi Plan Completo
                </a>
                <a href="{% url 'editar_plan_entrenamiento' plan.id %}" class="btn-primary" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
                    <i class="fas fa-edit"></i> Editar Mi Plan
                </a>
            </div>
        </div>
    </div>
</body>
</html>
