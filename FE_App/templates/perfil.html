{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - Fit Evolution</title>
    <link rel="stylesheet" href="{% static 'css/perfil.css' %}">
</head>
<body>
    <div class="profile-container">
        <!-- Botón de regreso al dashboard -->
        <a href="{% url 'dashboard' %}" class="back-button">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Volver al Dashboar
        </a>

        <div class="profile-view-card">
            <!-- Header con foto de perfil -->
            <div class="profile-view-header">
                <div class="profile-photo-section">
                    {% if profile.foto_perfil %}
                        <img src="{{ profile.foto_perfil.url }}" alt="Foto de perfil" class="profile-photo">
                    {% else %}
                        <div class="profile-photo-placeholder">
                            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                        </div>
                    {% endif %}
                </div>
                <div class="profile-user-info">
                    <h1>{{ user.get_full_name|default:user.username }}</h1>
                    <p class="user-email">{{ user.email }}</p>
                    <p class="profile-date">Perfil creado: {{ profile.fecha_creacion|date:"d/m/Y" }}</p>
                </div>
                <div class="header-logo">
                    <img src="{% static 'images/logo.svg' %}" alt="Fit Evolution Logo" class="logo-img">
                </div>
            </div>

            <!-- Mensajes -->
            {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}

            <!-- Botón de editar -->
            <div class="profile-actions">
                <a href="{% url 'editar_perfil' %}" class="btn btn-primary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    Editar Perfil
                </a>
            </div>

            <!-- Datos del perfil -->
            <div class="profile-data">
                <!-- Sección: Datos Personales -->
                <div class="data-section">
                    <h2 class="section-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        Datos Personales
                    </h2>
                    <div class="data-grid">
                        <div class="data-item">
                            <span class="data-label">Edad</span>
                            <span class="data-value">{{ profile.edad }} años</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label">Sexo</span>
                            <span class="data-value">{{ profile.get_sexo_display }}</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label">Peso</span>
                            <span class="data-value">{{ profile.peso }} kg</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label">Altura</span>
                            <span class="data-value">{{ profile.altura }} cm</span>
                        </div>
                        <div class="data-item highlight">
                            <span class="data-label">IMC</span>
                            <span class="data-value">{{ profile.imc|floatformat:2 }}</span>
                        </div>
                    </div>
                </div>

                <!-- Sección: Datos de Entrenamiento -->
                <div class="data-section">
                    <h2 class="section-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                        </svg>
                        Datos de Entrenamiento
                    </h2>
                    <div class="data-grid">
                        <div class="data-item">
                            <span class="data-label">Nivel de Actividad</span>
                            <span class="data-value badge badge-{{ profile.nivel_actividad }}">
                                {{ profile.get_nivel_actividad_display }}
                            </span>
                        </div>
                        <div class="data-item">
                            <span class="data-label">Objetivo</span>
                            <span class="data-value badge badge-objetivo">
                                {{ profile.get_objetivo_display }}
                            </span>
                        </div>
                        <div class="data-item highlight">
                            <span class="data-label">Porcentaje de Grasa</span>
                            <span class="data-value">{{ profile.porcentaje_grasa }}%</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label">Tiempo de Entrenamiento</span>
                            <span class="data-value">{{ profile.tiempo_entrenamiento }} minutos</span>
                        </div>
                    </div>
                </div>

                <!-- Información adicional -->
                <div class="profile-footer">
                    <p class="last-update">Última actualización: {{ profile.fecha_actualizacion|date:"d/m/Y H:i" }}</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Animación de entrada
        document.addEventListener('DOMContentLoaded', function() {
            const card = document.querySelector('.profile-view-card');
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            
            setTimeout(() => {
                card.style.transition = 'all 0.6s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100);

            // Animar items de datos
            const dataItems = document.querySelectorAll('.data-item');
            dataItems.forEach((item, index) => {
                item.style.opacity = '0';
                item.style.transform = 'translateX(-20px)';
                
                setTimeout(() => {
                    item.style.transition = 'all 0.4s ease';
                    item.style.opacity = '1';
                    item.style.transform = 'translateX(0)';
                }, 200 + (index * 50));
            });
        });
    </script>
</body>
</html>
